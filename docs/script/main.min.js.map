{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/ts/main.ts","webpack:///./src/ts/parsing/foward-string-reader.ts","webpack:///./src/ts/parsing/parser.ts","webpack:///./src/ts/parsing/parsing-error.ts","webpack:///./src/ts/nodes/aggregation-node.ts","webpack:///./src/ts/nodes/comparison-node.ts","webpack:///./src/ts/input-element.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","testedStrings","analyze","reader","parseString","toString","e","window","addEventListener","toAnalyze","console","log","errorMessageElement","document","getElementById","inputElement","resultElement","updateResult","rootNode","textToAnalyze","text","stringReader","textContent","innerHTML","appendChild","toHTML","addInputEventListener","event","hoveredNode","target","closest","highlightCleared","nodes","querySelectorAll","length","classList","contains","remove","clearHighlight","add","startIndex","dataset","endIndex","applyClassToSubstring","stringToRead","this","cursor","endOfString","next","current","substring","start","end","skipWhitespaces","numberOfWhitespaces","match","ForwardStringReader","input","result","Parser","parseNode","currentIndex","node","nbClosingParenthesisExpected","parseNodeInner","isAggregationCharacter","parseNodeInnerAggregation","parseNodeInnerComparison","partialNode","children","push","isValid","position","message","ParsingError","AggregationOperation","operation","AND","OR","NOT","character","childrenStrList","child","join","divElement","createElement","className","operatorText","operatorElement","AggregationNode","inner","ComparisonNode","elementId","element","inputEventListeners","listener","style","overflow","height","scrollHeight","callback","classname","inputText","left","createTextNode","middle","right","InputElement"],"mappings":"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","file":"main.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import ForwardStringReader from \"./parsing/foward-string-reader\";\r\nimport Parser from \"./parsing/parser\";\r\n\r\nimport INode from \"./nodes/inode\";\r\n\r\nimport InputElement from \"./input-element\";\r\n\r\nconst testedStrings: string[] = [\r\n    \"\",\r\n    \"()\",\r\n    \"((()))\",\r\n    \"  (  ( ()) )\",\r\n    \"(\",\r\n    \" ( (())\",\r\n    \"(()&\",\r\n    \"(hihi)\",\r\n    \"( (hihi)       )\",\r\n    \"&(hoho)(huhu)\",\r\n    \"  |   (hoho)   (huhu)\",\r\n    \"&((  |(hihi)(huhu)))   (huhu)\",\r\n    \"&()(huhu)(haha)\",\r\n    \"!(huhu)\",\r\n    \"!(huhu)(haha)\",\r\n];\r\n\r\nfunction analyze(reader: ForwardStringReader): string {\r\n    try {\r\n        const node: INode = Parser.parseString(reader);\r\n        return \"valid '\" + node.toString() + \"'\";\r\n    } catch (e) {\r\n        return e.toString();\r\n    }\r\n}\r\n\r\nwindow.addEventListener(\"load\", function analyzeAll(): void {\r\n    for (const toAnalyze of testedStrings) {\r\n        console.log(toAnalyze + \" : \" + analyze(new ForwardStringReader(toAnalyze)));\r\n    }\r\n\r\n    const errorMessageElement = document.getElementById(\"error-messages\");\r\n    const inputElement = new InputElement(\"input\");\r\n    const resultElement = document.getElementById(\"result\");\r\n\r\n    function updateResult(): void {\r\n        const textToAnalyze: string = inputElement.text;\r\n        const stringReader = new ForwardStringReader(textToAnalyze);\r\n\r\n        let rootNode: INode;\r\n        try {\r\n            rootNode = Parser.parseString(stringReader);\r\n\r\n            errorMessageElement.textContent = \"\";\r\n            resultElement.innerHTML = \"\";\r\n            resultElement.appendChild(rootNode.toHTML());\r\n        } catch (e) {\r\n            resultElement.innerHTML = \"\";\r\n            errorMessageElement.textContent = e.toString();\r\n        }\r\n    }\r\n\r\n    inputElement.addInputEventListener(updateResult);\r\n\r\n    function highlightHoveredNode(event: MouseEvent): void {\r\n        const hoveredNode = (event.target as HTMLElement).closest(\"#result .node\") as HTMLElement;\r\n\r\n        let highlightCleared = false;\r\n\r\n        const nodes = resultElement.querySelectorAll(\".node\");\r\n        for (let i = 0; i < nodes.length; i++) {\r\n            if (nodes[i] !== hoveredNode && nodes[i].classList.contains(\"hovered\")) {\r\n                highlightCleared = true;\r\n                nodes[i].classList.remove(\"hovered\");\r\n            }\r\n        }\r\n\r\n        if (hoveredNode !== null && !hoveredNode.classList.contains(\"hovered\")) {\r\n            hoveredNode.classList.add(\"hovered\");\r\n\r\n            const startIndex = +hoveredNode.dataset.startIndex;\r\n            const endIndex = +hoveredNode.dataset.endIndex;\r\n            inputElement.applyClassToSubstring(startIndex, endIndex, \"hovered\");\r\n        } else if (highlightCleared) {\r\n            inputElement.clearHighlight();\r\n        }\r\n    }\r\n\r\n    document.addEventListener(\"mousemove\", highlightHoveredNode);\r\n\r\n    inputElement.text = \"&((  |(hihi)(huhu)))   (huhu)\";\r\n    updateResult();\r\n});\r\n\r\n","/** Class for reading string character by character, only in forward direction.\r\n * It still allows substrings to be extracted from the string.\r\n */\r\nclass ForwardStringReader {\r\n    private readonly stringToRead: string;\r\n    private cursor: number;\r\n\r\n    public constructor(stringToRead: string) {\r\n        this.stringToRead = stringToRead;\r\n        this.cursor = 0;\r\n    }\r\n\r\n    /** Retrieves the character at the cursor's current position, or null if it reached end of string. */\r\n    public get current(): string | null {\r\n        return this.endOfString ? null : this.stringToRead[this.cursor];\r\n    }\r\n\r\n    /** Retrieves the 0-based current position of the cursor. */\r\n    public get currentIndex(): number {\r\n        return this.cursor;\r\n    }\r\n\r\n    /** Moves the cursor forward and returns the new selected character, or null if te cursor reached the end of the string. */\r\n    public next(): string | null {\r\n        if (!this.endOfString) {\r\n            this.cursor++;\r\n        }\r\n        return this.current;\r\n    }\r\n\r\n    public get endOfString(): boolean {\r\n        return this.cursor >= this.stringToRead.length;\r\n    }\r\n\r\n    /** Returns the length of the read string. */\r\n    public get length(): number {\r\n        return this.stringToRead.length;\r\n    }\r\n\r\n    public substring(start: number, end: number): string {\r\n        return this.stringToRead.substring(start, end);\r\n    }\r\n\r\n    /* Returns the number of skipped whitespace characters */\r\n    public skipWhitespaces(): number {\r\n        let numberOfWhitespaces = 0;\r\n\r\n        while (this.current && this.current.match(/\\s/)) {\r\n            numberOfWhitespaces++;\r\n            this.next();\r\n        }\r\n\r\n        return numberOfWhitespaces;\r\n    }\r\n}\r\n\r\nexport default ForwardStringReader;\r\n","import ForwardStringReader from \"./foward-string-reader\";\r\nimport ParsingError from \"./parsing-error\";\r\n\r\nimport AggregationNode from \"../nodes/aggregation-node\";\r\nimport ComparisonNode from \"../nodes/comparison-node\";\r\nimport LdapNode from \"../nodes/inode\";\r\n\r\nclass Parser {\r\n    public static parseString(input: ForwardStringReader): LdapNode {\r\n        const result: LdapNode = Parser.parseNode(input);\r\n        \r\n        if (!input.endOfString) {\r\n            throw new ParsingError(input.currentIndex, \"Invalid character\");\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /** Leaves the cursor after the last ')' */\r\n    private static parseNode(input: ForwardStringReader): LdapNode {\r\n        let nbClosingParenthesisExpected = 0;\r\n        let node: LdapNode = null;\r\n\r\n        input.skipWhitespaces();\r\n        while (input.current === \"(\") {\r\n            nbClosingParenthesisExpected++;\r\n            input.next();\r\n            input.skipWhitespaces();\r\n        }\r\n\r\n        if (input.current === \")\") {\r\n            throw new ParsingError(input.currentIndex, \"Invalid empty node\");\r\n        }\r\n\r\n        node = Parser.parseNodeInner(input);\r\n\r\n        if (!input.endOfString && input.current !== \")\") {\r\n            throw new ParsingError(input.currentIndex, \"Invalid character\");\r\n        }\r\n\r\n        while (input.current === \")\" && nbClosingParenthesisExpected > 0) {\r\n            nbClosingParenthesisExpected--;\r\n\r\n            input.next();\r\n            input.skipWhitespaces();\r\n        }\r\n\r\n        if (nbClosingParenthesisExpected > 0) {\r\n            throw new ParsingError(input.currentIndex, \"Missing closing parenthesis\");\r\n        }\r\n\r\n        return node;\r\n    }\r\n\r\n    private static parseNodeInner(input: ForwardStringReader): LdapNode {\r\n        input.skipWhitespaces();\r\n\r\n        if (AggregationNode.isAggregationCharacter(input.current)) {\r\n            return Parser.parseNodeInnerAggregation(input);\r\n        } else {\r\n            return Parser.parseNodeInnerComparison(input);\r\n        }\r\n    }\r\n\r\n    private static parseNodeInnerAggregation(input: ForwardStringReader): AggregationNode {\r\n        const partialNode = new AggregationNode(input.current);\r\n        partialNode.startIndex = input.currentIndex;\r\n\r\n        input.next();\r\n        input.skipWhitespaces();\r\n        while (input.current === \"(\") {\r\n            partialNode.children.push(Parser.parseNode(input));\r\n            input.skipWhitespaces();\r\n        }\r\n\r\n        partialNode.endIndex = input.currentIndex;\r\n\r\n        if (!partialNode.isValid()) {\r\n            throw new ParsingError(input.currentIndex, \"Invalid agregation node\");\r\n        }\r\n\r\n        return partialNode;\r\n    }\r\n\r\n    private static parseNodeInnerComparison(input: ForwardStringReader): ComparisonNode {\r\n        const startIndex = input.currentIndex;\r\n        while (!input.endOfString && input.current !== \")\") {\r\n            input.next();\r\n        }\r\n        const node = new ComparisonNode(input.substring(startIndex, input.currentIndex));\r\n        node.startIndex = startIndex;\r\n        node.endIndex = input.currentIndex;\r\n        return node;\r\n    }\r\n}\r\n\r\nexport default Parser;\r\n","/* Class for storing parsing errors */\r\nclass ParsingError {\r\n    public readonly position: number;\r\n    public readonly message: string;\r\n\r\n    constructor(position: number, message: string) {\r\n        this.position = position;\r\n        this.message = message;\r\n    }\r\n\r\n    public toString(): string {\r\n        return \"Parsing error at \" + this.position + \": \" + this.message;\r\n    }\r\n}\r\n\r\nexport default ParsingError;\r\n","import INode from \"./inode\";\r\n\r\nenum AggregationOperation {\r\n    AND,\r\n    OR,\r\n    NOT,\r\n}\r\n\r\nclass AggregationNode implements INode {\r\n    public startIndex: number;\r\n    public endIndex: number;\r\n    \r\n    public operation: AggregationOperation = null;\r\n    public children: INode[] = null;\r\n\r\n    public static isAggregationCharacter(character: string): boolean {\r\n        return character === \"&\" || character === \"|\" || character === \"!\";\r\n    }\r\n\r\n    public constructor(operation: string) {\r\n        this.children = [];\r\n\r\n        if (operation === \"&\") {\r\n            this.operation = AggregationOperation.AND;\r\n        } else if (operation === \"|\") {\r\n            this.operation = AggregationOperation.OR;\r\n        } else if (operation === \"!\") {\r\n            this.operation = AggregationOperation.NOT;\r\n        } else {\r\n            this.operation = null;\r\n        }\r\n    }\r\n\r\n    public isValid(): boolean {\r\n        switch (this.operation) {\r\n            case AggregationOperation.AND:\r\n            case AggregationOperation.OR:\r\n                return this.children.length >= 2;\r\n            case AggregationOperation.NOT:\r\n                return this.children.length === 1;\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n\r\n    public toString(): string {\r\n        if (this.operation === AggregationOperation.NOT) {\r\n            return \"NOT \" + this.children[0].toString();\r\n        } else if (this.operation === AggregationOperation.AND) {\r\n            const childrenStrList: string[] = [];\r\n            for (const child of this.children) {\r\n                childrenStrList.push(child.toString());\r\n            }\r\n            return \"(\" + childrenStrList.join(\") AND (\") + \")\";\r\n        } else if (this.operation === AggregationOperation.OR) {\r\n            const childrenStrList: string[] = [];\r\n            for (const child of this.children) {\r\n                childrenStrList.push(child.toString());\r\n            }\r\n            return \"(\" + childrenStrList.join(\") OR (\") + \")\";\r\n        }\r\n\r\n        return \"<empty>\";\r\n    }\r\n\r\n    public toHTML(): HTMLElement {\r\n        const divElement = document.createElement(\"div\");\r\n        divElement.className = \"node\";\r\n        divElement.dataset.startIndex = this.startIndex.toString();\r\n        divElement.dataset.endIndex = this.endIndex.toString();\r\n        \r\n        if (this.operation === AggregationOperation.AND || this.operation === AggregationOperation.OR) {\r\n            divElement.appendChild(this.children[0].toHTML());\r\n\r\n            const operatorText = (this.operation === AggregationOperation.AND) ? \"and\" : \"or\";\r\n\r\n            for (let i = 1; i < this.children.length; i++) {\r\n                const operatorElement = document.createElement(\"div\");\r\n                operatorElement.className = \"operator\";\r\n                operatorElement.textContent = operatorText;\r\n\r\n                divElement.appendChild(operatorElement);\r\n                divElement.appendChild(this.children[i].toHTML());\r\n            }\r\n        } else if (this.operation === AggregationOperation.NOT) {\r\n            const operatorElement = document.createElement(\"span\");\r\n            operatorElement.className = \"operator\";\r\n            operatorElement.textContent = \"not \";\r\n\r\n            divElement.appendChild(operatorElement);\r\n        }\r\n        return divElement;\r\n    }\r\n}\r\n\r\nexport default AggregationNode;\r\n","import INode from \"./inode\";\r\n\r\nclass ComparisonNode implements INode {\r\n    public startIndex: number;\r\n    public endIndex: number;\r\n\r\n    public inner: string;\r\n\r\n    public constructor (inner: string) {\r\n        this.inner = inner;\r\n    }\r\n\r\n    public toString(): string {\r\n        return this.inner;\r\n    }\r\n\r\n    public toHTML(): HTMLElement {\r\n        const divElement = document.createElement(\"div\")\r\n        divElement.className = \"node\";\r\n        divElement.dataset.startIndex = this.startIndex.toString();\r\n        divElement.dataset.endIndex = this.endIndex.toString();\r\n        divElement.textContent = this.inner;\r\n\r\n        return divElement;\r\n    }\r\n}\r\n\r\nexport default ComparisonNode;","type InputEventListener = () => void;\r\n\r\nclass InputElement {\r\n    private element: HTMLElement;\r\n    private inputEventListeners: InputEventListener[];\r\n\r\n    public constructor(elementId: string) {\r\n        const element = document.getElementById(elementId);\r\n\r\n        element.addEventListener(\"keyup\", () => {\r\n            for (const listener of this.inputEventListeners) {\r\n                listener();\r\n            }\r\n        });\r\n\r\n        this.inputEventListeners = [];\r\n        this.inputEventListeners.push(function updateInputHeight(): void {\r\n            const inputPadding = 8;\r\n\r\n            element.style.overflow = 'hidden';\r\n            element.style.height = \"0\";\r\n            element.style.height = (element.scrollHeight - 2 * inputPadding) + 'px';\r\n        });\r\n\r\n        this.element = element;\r\n    }\r\n\r\n    public addInputEventListener(callback: InputEventListener): void {\r\n        this.inputEventListeners.push(callback);\r\n    }\r\n\r\n    public get text(): string {\r\n        return this.element.textContent;\r\n    }\r\n    public set text(text: string) {\r\n        this.element.textContent = text;\r\n    }\r\n\r\n    public clearHighlight(): void {\r\n        this.text = this.element.textContent;\r\n    }\r\n\r\n    public applyClassToSubstring(startIndex: number, endIndex: number, classname: string): void {\r\n        const inputText = this.text;\r\n\r\n        const left = document.createTextNode(inputText.substring(0, startIndex));\r\n\r\n        const middle = document.createElement(\"span\");\r\n        middle.className = classname;\r\n        middle.textContent = inputText.substring(startIndex, endIndex);\r\n\r\n        const right = document.createTextNode(inputText.substring(endIndex));\r\n\r\n        this.element.innerHTML = \"\";\r\n        this.element.appendChild(left);\r\n        this.element.appendChild(middle);\r\n        this.element.appendChild(right);\r\n    }\r\n}\r\n\r\nexport default InputElement;"],"sourceRoot":""}